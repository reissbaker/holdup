!function(n){"use strict";var e=n.holdup;n.holdup={noConflict:function(){return n.holdup=e,this}}}(window),!function(){"use strict";function n(){this._fulfilledBuffer=[],this._rejectedBuffer=[],this._log=!1,this._state=_,this._args=[],this._scheduled=!1}function e(n,e){return function(){return n.apply(e,arguments)}}function t(n){return n._state===_}function r(n){return n._state===v}function u(n){return n._state===y}function o(n,e,t,r){n._fulfilledBuffer.push(function(){l(n,e,v,t)}),n._rejectedBuffer.push(function(){l(n,e,y,r)})}function f(n,e,t){n._state=e?v:y,n._args=t,i(n)}function i(n){n._scheduled||(n._scheduled=!0,m(function(){n._scheduled=!1,c(n)}))}function c(n){d(r(n)?n._fulfilledBuffer:n._rejectedBuffer,null,n._args),n._fulfilledBuffer=[],n._rejectedBuffer=[]}function l(n,e,t,r){var u=n._args,o=t===v?e.fulfill:e.reject;"function"==typeof r?s(e,r,u):o.apply(e,n._args)}function s(n,e,t){var r;try{r=e.apply(null,t)}catch(u){return n.reject(u),n._log&&"undefined"!=typeof console&&console.log(u),void 0}a(n,r)}function a(n,e){var t=!1;try{t=p(e)}catch(r){return n.reject(r),n._log&&"undefined"!=typeof console&&console.log(r),void 0}t?e.then(function(){n.fulfill.apply(n,arguments)},function(){n.reject.apply(n,arguments)}):n.fulfill(e)}function p(n){return n&&"function"==typeof n.then}function d(n,e,t){var r,u;for(r=0;u=n[r];r++)u.apply(e,t)}function h(n){return Array.prototype.slice.call(n,0,n.length)}function m(n){var e=setTimeout;"undefined"!=typeof setImmediate&&(e=setImmediate),"undefined"!=typeof process&&process.nextTick&&(e=process.nextTick),e(n,0)}var g;g="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?module.exports:window.holdup;var y=-1,v=1,_=0;n.prototype.then=function(e,r){var u=new n;return o(this,u,e,r),t(this)||i(this),u.promise()},n.prototype.fulfill=function(){t(this)&&f(this,!0,h(arguments))},n.prototype.reject=function(){t(this)&&f(this,!1,h(arguments))},n.prototype.promise=function(){return{then:e(this.then,this)}},n.prototype.fulfilled=function(){return r(this)},n.prototype.rejected=function(){return u(this)},n.prototype.pending=function(){return t(this)},g.Deferred=n}(),!function(){"use strict";function n(n,e){function t(n){return function(e){l[n]=e,p.decrement()}}function u(n){return function(){l[n]=void 0,p.decrement()}}var o,i,c,l=Array(n.length),s=new a,p=r(n.length,f(s.fulfill,s),f(s.reject,s)),d=e?u:t,h=e?t:u;for(i=0,c=n.length;c>i;i++)o=n[i],o.then(d(i),h(i));return s.then(function(){return l})}function e(n,e,r){var f=[],i=[],c=function(n){f.push(n)},l=function(n){i.push(n)},s=e?u(c):o(c),a=r?u(l):o(l);return{fulfilled:f,rejected:i,promise:t(n,s,a)}}function t(n,e,t){var u,o,i,c=new a;if(0===n.length)return c.fulfill([]),c;for(i=r(n.length,f(c.fulfill,c),f(c.reject,c)),u=0;o=n[u];u++)o.then(e(i,o),t(i,o));return c}function r(n,e,t){var r=n,u=!1,o={decrement:function(){u||(r--,0===r&&e())},error:function(){u||(u=!0,t.apply(arguments))}};return 0===r&&e(),o}function u(n){return function(e,t){return function(){n&&n(t),e.decrement()}}}function o(n){return function(e,t){return function(){n&&n(t),e.error()}}}function f(n,e){return function(){n.apply(e,arguments)}}function i(n){return c(l(n))}function c(n){var e,t,r=[];for(e=0;t=n[e];e++)t instanceof Array?r=r.concat(c(t)):r.push(t);return r}function l(n,e,t){return Array.prototype.slice.call(n,e||0,t||n.length)}var s,a;"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?(s=module.exports,a=require("./deferred").Deferred):(s=window.holdup,a=s.Deferred),s.all=function(){var n=e(i(arguments),!0,!1);return s.make(function(e,t){n.promise.then(function(){e(n.fulfilled)},function(){t(n.rejected[0])})})},s.none=function(){var n=e(i(arguments),!1,!0);return s.make(function(e,t){n.promise.then(function(){e(n.rejected)},function(){t(n.fulfilled[0])})})},s.resolved=function(){var n=e(i(arguments),!0,!0);return s.make(function(e){n.promise.then(function(){e(n.fulfilled,n.rejected)})})},s.firstFulfilled=s.ff=function(){var n=s.none(i(arguments));return s.make(function(e,t){n.then(t,e)})},s.firstRejected=s.fr=function(){var n=s.all(i(arguments));return s.make(function(e,t){n.then(t,e)})},s.lastFulfilled=s.lf=function(){var n=s.resolved(i(arguments));return s.make(function(e,t){n.then(function(n,r){0===n.length?t(r):e(n[n.length-1])})})},s.lastRejected=s.lr=function(){var n=s.resolved(i(arguments));return s.make(function(e,t){n.then(function(n,r){0===r.length?t(n):e(r[r.length-1])})})},s.data=function(){var e=l(arguments),t=i(e.slice(0,e.length-1)),r=n(t,!1),u=e[e.length-1];return r.then(function(n){u.apply(null,n)}),r},s.errors=function(){var e=l(arguments),t=i(e.slice(0,e.length-1)),r=n(t,!0),u=e[e.length-1];return r.then(function(n){u.apply(null,n)}),r},s.wrap=function(n){var e=l(arguments,1);return s.make(function(t,r){e.push(function(n,e){n?r(n):t(e)}),n.apply(null,e)})},s.wrapFor=function(n,e){var t=l(arguments,2);return s.make(function(r,u){t.push(function(n,e){n?u(n):r(e)}),e.apply(n,t)})},s.make=function(n){var e=new a;return n(f(e.fulfill,e),f(e.reject,e)),e.promise()},s.invert=function(n){return s.make(function(e,t){n.then(t,e)})},s.timeout=function(n){return s.make(function(e){setTimeout(function(){e(n)},n)})}}();