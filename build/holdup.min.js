!function(n){if("object"==typeof exports)module.exports=n();else if("function"==typeof define&&define.amd)define(n);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.holdup=n()}}(function(){return function n(t,r,e){function o(i,f){if(!r[i]){if(!t[i]){var s="function"==typeof require&&require;if(!f&&s)return s(i,!0);if(u)return u(i,!0);throw Error("Cannot find module '"+i+"'")}var c=r[i]={exports:{}};t[i][0].call(c.exports,function(n){var r=t[i][1][n];return o(r?r:n)},c,c.exports,n,t,r,e)}return r[i].exports}for(var u="function"==typeof require&&require,i=0;i<e.length;i++)o(e[i]);return o}({1:[function(n,t){var r=n("./lib/deferred/deferred").Deferred,e=n("./lib/holdup/holdup"),o=n("./lib/deferred/error");e.Deferred=r,e.on=o.events.on,e.off=o.events.off,e.once=o.events.once,e.resetErrors=o.reset,t.exports=e},{"./lib/deferred/deferred":2,"./lib/deferred/error":3,"./lib/holdup/holdup":8}],2:[function(n,t,r){(function(t){"use strict";function e(){this._fulfilledBuffer=[],this._rejectedBuffer=[],this._thrownBuffer=[],this._state=D.PENDING,this._value=null,this._scheduled=!1,this._log=!1}function o(n){return n._state===D.PENDING}function u(n){return n._state===D.FULFILLED}function i(n){return n._state===D.REJECTED}function f(n){return n._state===D.THROWN}function s(n,t,r,e,o){n._fulfilledBuffer.push(function(n){w(t,n,D.FULFILLED,r,!1)}),n._rejectedBuffer.push(function(n){w(t,n,D.REJECTED,e,!1)}),n._thrownBuffer.push(function(n){w(t,n,D.THROWN,e,!1)}),n._thrownBuffer.push(function(n){w(t,n,D.THROWN,o,!0)})}function c(n,t,r){n._state=t,n._value=r}function l(n){n._scheduled||(n._scheduled=!0,t.nextTick(function(){n._scheduled=!1,a(n)}))}function a(n){var t=p(n);L(t,n._value),d(n)}function p(n){return u(n)?n._fulfilledBuffer:f(n)?n._thrownBuffer:n._rejectedBuffer}function d(n){n._fulfilledBuffer=[],n._rejectedBuffer=[],n._thrownBuffer=[]}function h(n,t){return j.isWrapped(n)?(j.postpone(n),n):j.wrap(n,t)}function w(n,r,e,o,u){var i=v(n,e);"function"==typeof o?y(n,o,r,u):(j.isWrapped(r)&&j.postpone(r),t.nextTick(function(){i.call(n,r)}))}function v(n,t){return t===D.FULFILLED?n.fulfill:t===D.THROWN?n.throwError:n.reject}function y(n,t,r,e){var o,u=j.isWrapped(r),i=u?j.unwrap(r):r;try{o=t(i),u&&j.handle(r,e)}catch(f){return void n.throwError(f)}m(n,o)}function m(n,t){var r=null;if(!g(n,t))return"function"==typeof t||"object"==typeof t?(r=E(t,n),void("function"==typeof r?(t instanceof x?_(t._deferred,r,n):t instanceof e&&_(t,r,n),b(t,r,n)):n.fulfill(t))):void n.fulfill(t)}function g(n,t){return t===n?(n.throwError(new TypeError("Promise cannot return itself.")),!0):t instanceof x&&t._deferred===n?(n.throwError(new TypeError("Promise cannot return itself")),!0):!1}function E(n,t){var r=null;try{r=T(n)}catch(e){t.throwError(e)}return r}function _(n,t,r){var e=k(n,t,r);try{t.call(n,e.resolve,e.reject,e.throwError)}catch(o){e.throwError(o)}}function b(n,t,r){var e=k(n,t,r);try{t.call(n,e.resolve,e.reject)}catch(o){e.throwError(o)}}function k(n,t,r){var e,o,u,i=!1,f=function(n){i||(i=e=!0,m(r,n))},s=function(n){i||(i=o=!0,r.reject(n))},c=function(n){i||(i=u=!0,r.throwError(n))};return{resolve:f,reject:s,throwError:c}}function T(n){return n?n.then:null}function L(n,t){var r,e;for(r=0;e=n[r];r++)e(t)}var j=n("./error"),D=n("./state"),F=n("./inspection"),x=n("./flyweight"),R=function(){};"undefined"!=typeof console&&"function"==typeof console.log&&(R=function(){console.log.apply(console,arguments)}),e.prototype.then=function(n,t,r){var u=new e;return s(this,u,n,t,r),o(this)||l(this),new x(u)},e.prototype.thrownError=function(n,t){return t||(t=n,n=null),t?this.then(null,null,function(r){if(null===n)return t(r);if(r instanceof n)return t(r);var o=new e;return o.throwError(r),o}):this.then()},e.prototype.thrown=e.prototype.thrownError,e.prototype.error=function(n,t){return t||(t=n,n=null),t?this.then(null,function(r){if(null===n)return t(r);if(r instanceof n)return t(r);var o=new e;return o.reject(r),o}):this.then()},e.prototype.unthrownError=function(n,t){if(t||(t=n,n=null),!t)return this.then();var r=this;return this.error(n,function(n){var o,u=r.inspect();return u.isThrown()?(o=new e,o.throwError(n),o):t(n)})},e.prototype.inspect=function(){return new F(this)},e.prototype.fulfill=function(n){o(this)&&(c(this,D.FULFILLED,n),l(this))},e.prototype.reject=function(n){o(this)&&(this._log&&R(n),l(this),c(this,D.REJECTED,h(n,!1)))},e.prototype.throwError=function(n){o(this)&&(this._log&&R(n),l(this),c(this,D.THROWN,h(n,!0)))},e.prototype.promise=function(){return new x(this)},e.prototype.fulfilled=function(){return u(this)},e.prototype.rejected=function(){return i(this)||f(this)},e.prototype.pending=function(){return o(this)},r.Deferred=e}).call(this,n("/Users/mattbaker/Hack/holdup/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"./error":3,"./flyweight":4,"./inspection":5,"./state":7,"/Users/mattbaker/Hack/holdup/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":10}],3:[function(n,t,r){(function(n){"use strict";function t(n,t){this.error=n,this.thrown=t,this.id=i++,this.postponed=!1}function e(){var t=a;l||(l=!0,n.nextTick(function(){t===a&&(l=!1,o())}))}function o(){var n,t;for(n in c)c.hasOwnProperty(n)&&(t=c[n],t.postponed?(t.postponed=!1,e()):(r.handle(t,!0),u(t)))}function u(n){var t;t=n.thrown?f.concat(s):f;for(var e=0,o=t.length;o>e;e++)t[e](r.unwrap(n))}var i=0,f=[],s=[];r.events={on:function(n,t){"error"===n?f.push(t):"thrown"===n&&s.push(t)},off:function(n,t){var r;"error"===n?r=f:"thrown"===n&&(r=s);for(var e=0,o=r.length;o>e;e++)if(r[e]===t)return r.splice(e,1),!0;return!1},once:function(n,t){var e=function(){t.apply(void 0,arguments),r.events.off(n,e)};r.events.on(n,e)}};var c={};r.wrap=function(n,r){var o=new t(n,r);return c[o.id]=o,e(),o},r.unwrap=function(n){return n.error},r.isWrapped=function(n){return n instanceof t},r.handle=function(n,t){(!n.thrown||t)&&c.hasOwnProperty(n.id)&&delete c[n.id]},r.postpone=function(n){n.postponed=!0},r.reset=function(){c={},f=[],s=[],l=!1,a++};var l=!1,a=0}).call(this,n("/Users/mattbaker/Hack/holdup/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"/Users/mattbaker/Hack/holdup/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":10}],4:[function(n,t){function r(n){this.then=e(n.then,n),this.error=e(n.error,n),this.thrown=e(n.thrown,n),this.inspect=e(n.inspect,n),this._deferred=n}function e(n,t){return function(){return n.apply(t,arguments)}}t.exports=r},{}],5:[function(n,t){"use strict";function r(n,t){this._s=o(n,t)}var e=n("./state"),o=n("./state-container"),u=n("./error");r.prototype.value=function(){if(!this.isFulfilled())throw new TypeError;return this._s.value()},r.prototype.error=function(){if(!this.isRejected())throw new TypeError;var n=this._s.value();return u.isWrapped(n)?u.unwrap(n):n},r.prototype.isThrown=function(){return this._s.state()===e.THROWN},r.prototype.isRejected=function(){return this._s.state()===e.REJECTED||this.isThrown()},r.prototype.isFulfilled=function(){return this._s.state()===e.FULFILLED},t.exports=r},{"./error":3,"./state":7,"./state-container":6}],6:[function(n,t){"use strict";function r(n){this.d=n}function e(n,t){this._s=n,this._v=t}r.prototype.state=function(){return this.d._state},r.prototype.value=function(){return this.d._value},e.prototype.state=function(){return this._s},e.prototype.value=function(){return this._v},t.exports=function(n,t){return"number"==typeof n?new e(n,t):new r(n)}},{}],7:[function(n,t,r){"use strict";r.REJECTED=0,r.FULFILLED=1,r.PENDING=2,r.THROWN=3},{}],8:[function(n,t,r){"use strict";function e(n,t){return function(r){t(new y(n,r))}}function o(n,t){return function(r){n[t]=r}}function u(n,t){return function(){n(t.apply(void 0,arguments))}}function i(n,t,r,e){var o,u,i,s,l=Array(n.length),a=new d,p=new w(n.length,function(){a.fulfill(l)},c(a.reject,a));for(s=function(n){p.error(e?e(n):n)},u=0,i=n.length;i>u;u++)o=n[u],o.then(t?f(l,u,p,e):s,r?f(l,u,p,e):s);return a}function f(n,t,r,e){return function(o){n[t]=e?e(o):o,r.decrement()}}function s(n,t){function r(n){return function(t){f[n]=t,l.decrement()}}function e(n){return function(){f[n]=void 0,l.decrement()}}var o,u,i,f=Array(n.length),s=new d,l=new w(n.length,c(s.fulfill,s),c(s.reject,s)),a=t?e:r,p=t?r:e;for(u=0,i=n.length;i>u;u++)o=n[u],o.then(a(u),p(u));return s.then(function(){return f})}function c(n,t){return function(){n.apply(t,arguments)}}function l(n){return a(p(n))}function a(n){var t,r,e=[];for(t=0;r=n[t];t++)r instanceof Array?e=e.concat(a(r)):e.push(r);return e}function p(n,t,r){return Array.prototype.slice.call(n,t||0,r||n.length)}var d=n("../deferred/deferred").Deferred,h=n("../deferred/flyweight"),w=n("./semaphore"),v=n("../deferred/state"),y=n("../deferred/inspection");r.make=function(n){var t=new d;try{n(c(t.fulfill,t),c(t.reject,t))}catch(r){t.throwError(r)}return t.promise()},r.fulfill=function(n){return r.make(function(t){t(n)})},r.fcall=function(n){return r.make(function(t){t(n())})},r.reject=function(n){return r.make(function(t,r){r(n)})},r.ferr=function(n){return r.make(function(t,r){r(n())})},r.all=function(){return i(l(arguments),!0,!1)},r.none=function(){return i(l(arguments),!1,!0)},r.resolved=r.settled=r.allSettled=function(){for(var n,t,r,i=l(arguments),f=new d,s=Array(i.length),a=new w(i.length,function(){f.fulfill(s)}),p=c(a.decrement,a),y=0,m=i.length;m>y;y++)n=o(s,y),t=i[y],r=u(p,n),t instanceof d||t instanceof h?(t.then(e(v.FULFILLED,r)),t.unthrownError(e(v.REJECTED,r)),t.thrownError(e(v.THROWN,r))):t.then(e(v.FULFILLED,r),e(v.REJECTED,r));return f},r.firstValue=r.race=function(){var n=l(arguments);return r.invert(r.none(n))},r.firstError=function(){var n=l(arguments);return r.invert(r.all(n))},r.lastValue=function(){function n(n){i=!0,t=n}for(var t,e,o,u,i=!1,f=l(arguments),e=0,o=f.length;o>e;e++)f[e].then(n);return u=r.settled(f),r.make(function(n,r){u.then(function(e){var o,u,f;if(!i){for(o=[],u=0,f=e.length;f>u;u++)o.push(e[u].error());return void r(o)}n(t)})})},r.lastError=function(){function n(n){i=!0,t=n}for(var t,e,o,u,i=!1,f=l(arguments),e=0,o=f.length;o>e;e++)f[e].then(null,n);return u=r.settled(f),r.make(function(n,r){u.then(function(e){var o,u,f;if(!i){for(o=[],u=0,f=e.length;f>u;u++)o.push(e[u].value());return void r(o)}n(t)})})},r.invert=function(n){return r.make(function(t,r){n.then(r,t)})},r.spreadValues=r.spread=function(n,t){n.then(function(n){t.apply(void 0,n)})},r.spreadErrors=function(n,t){n.then(void 0,function(n){t.apply(void 0,n)})},r.data=function(){var n=p(arguments),t=l(n.slice(0,n.length-1)),r=s(t,!1),e=n[n.length-1];return r.then(function(n){e.apply(null,n)}),r},r.errors=function(){var n=p(arguments),t=l(n.slice(0,n.length-1)),r=s(t,!0),e=n[n.length-1];return r.then(function(n){e.apply(null,n)}),r},r.wait=function(n){return r.make(function(t){setTimeout(function(){t(n)},n)})},r.delay=function(n,t){return r.make(function(r,e){n.then(function(){var n=p(arguments,0);setTimeout(function(){r.apply(null,n)},t)},function(){var n=p(arguments,0);setTimeout(function(){e.apply(null,n)},t)})})},r.timeout=function(n,t){return r.make(function(r,e){setTimeout(function(){e("Error: "+t+"ms timeout exceeded.")},t),n.then(r,e)})},r.napply=function(n,t,e){var o=e.slice(0,e.length);return r.make(function(r,e){o.push(function(n,t){n?e(n):r(t)}),t.apply(n,o)})},r.nfapply=function(n,t){return r.napply(null,n,t)},r.ncall=r.wrapFor=function(n,t){var e=p(arguments,2);return r.napply(n,t,e)},r.nfcall=r.wrap=function(n){var t=p(arguments,1);return r.napply(null,n,t)},r.npost=function(n,t,e){return r.napply(n,n[t],e)},r.ninvoke=r.nsend=function(n,t){var e=p(arguments,2);return r.napply(n,n[t],e)},r.nbind=function(n,t){var e=p(arguments,2);return function(){var o=p(arguments);return r.napply(t,n,e.concat(o))}},r.nfbind=r.denodeify=function(n){var t=[n,null].concat(p(arguments,1));return r.nbind.apply(r,t)},r.nodeify=function(n,t){return n.then(function(n){t(null,n)},function(n){t(n)}),n}},{"../deferred/deferred":2,"../deferred/flyweight":4,"../deferred/inspection":5,"../deferred/state":7,"./semaphore":9}],9:[function(n,t){function r(n,t,r){this.size=n,this.callback=t,this.errback=r,this.errored=!1,0===n&&t()}r.prototype.decrement=function(){this.errored||(this.size--,0===this.size&&this.callback())},r.prototype.error=function(){this.errored||(this.errored=!0,this.errback.apply(void 0,arguments))},t.exports=r},{}],10:[function(n,t){var r=t.exports={};r.nextTick=function(){var n="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(n)return function(n){return window.setImmediate(n)};if(t){var r=[];return window.addEventListener("message",function(n){var t=n.source;if((t===window||null===t)&&"process-tick"===n.data&&(n.stopPropagation(),r.length>0)){var e=r.shift();e()}},!0),function(n){r.push(n),window.postMessage("process-tick","*")}}return function(n){setTimeout(n,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.binding=function(){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw Error("process.chdir is not supported")}},{}]},{},[1])(1)});