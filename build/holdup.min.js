!function(n){if("object"==typeof exports)module.exports=n();else if("function"==typeof define&&define.amd)define(n);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.holdup=n()}}(function(){return function n(t,r,e){function o(i,f){if(!r[i]){if(!t[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);throw Error("Cannot find module '"+i+"'")}var l=r[i]={exports:{}};t[i][0].call(l.exports,function(n){var r=t[i][1][n];return o(r?r:n)},l,l.exports,n,t,r,e)}return r[i].exports}for(var u="function"==typeof require&&require,i=0;i<e.length;i++)o(e[i]);return o}({1:[function(n,t){var r=n("./lib/deferred").Deferred,e=n("./lib/holdup"),o=n("./lib/error");e.Deferred=r,e.on=o.events.on,e.off=o.events.off,e.once=o.events.once,e.resetErrors=o.reset,t.exports=e},{"./lib/deferred":2,"./lib/error":3,"./lib/holdup":4}],2:[function(n,t,r){var e=n("__browserify_process");!function(){"use strict";function t(n){this.then=u(n.then,n),this.error=u(n.error,n),this.thrown=u(n.thrown,n),this._deferred=n}function o(){this._fulfilledBuffer=[],this._rejectedBuffer=[],this._thrownBuffer=[],this._state=F,this._value=null,this._scheduled=!1,this._log=!1}function u(n,t){return function(){return n.apply(t,arguments)}}function i(n){return n._state===F}function f(n){return n._state===A}function c(n){return n._state===D}function l(n){return n._state===W}function s(n,t,r,e,o){n._fulfilledBuffer.push(function(n){m(t,n,A,r,!1)}),n._rejectedBuffer.push(function(n){m(t,n,D,e,!1)}),n._thrownBuffer.push(function(n){m(t,n,W,e,!1)}),n._thrownBuffer.push(function(n){m(t,n,W,o,!0)})}function a(n,t,r){n._state=t,n._value=r}function p(n){n._scheduled||(n._scheduled=!0,e.nextTick(function(){n._scheduled=!1,d(n)}))}function d(n){var t=h(n);T(t,n._value),v(n)}function h(n){return f(n)?n._fulfilledBuffer:l(n)?n._thrownBuffer:n._rejectedBuffer}function v(n){n._fulfilledBuffer=[],n._rejectedBuffer=[],n._thrownBuffer=[]}function w(n,t){return P.isWrapped(n)?(P.postpone(n),n):P.wrap(n,t)}function m(n,t,r,e,o){var u=y(n,r);"function"==typeof e?g(n,e,t,o):u.call(n,t)}function y(n,t){return t===A?n.fulfill:t===W?n.throwError:n.reject}function g(n,t,r,e){var o,u=P.isWrapped(r),i=u?P.unwrap(r):r;try{o=t(i),u&&P.handle(r,e)}catch(f){return n.throwError(f),void 0}_(n,o)}function _(n,r){var e=null;return j(n,r),"function"==typeof r||"object"==typeof r?(e=k(r,n),"function"==typeof e?(r instanceof t?b(r._deferred,e,n):r instanceof o&&b(r,e,n),E(r,e,n)):n.fulfill(r),void 0):(n.fulfill(r),void 0)}function j(n,r){return r===n?(n.throwError(new TypeError("Promise cannot return itself.")),!0):r instanceof t&&r._deferred===n?(n.throwError(new TypeError("Promise cannot return itself")),!0):!1}function k(n,t){var r=null;try{r=x(n)}catch(e){t.throwError(e)}return r}function b(n,t,r){var e=B(n,t,r);try{t.call(n,e.resolve,e.reject,e.throwError)}catch(o){e.throwError(o)}}function E(n,t,r){var e=B(n,t,r);try{t.call(n,e.resolve,e.reject)}catch(o){e.throwError(o)}}function B(n,t,r){var e,o,u,i=!1,f=function(n){i||(i=e=!0,_(r,n))},c=function(n){i||(i=o=!0,r.reject(n))},l=function(n){i||(i=u=!0,r.throwError(n))};return{resolve:f,reject:c,throwError:l}}function x(n){return n?n.then:null}function T(n,t){var r,e;for(r=0;e=n[r];r++)e(t)}var P=n("./error"),q=function(){};"undefined"!=typeof console&&"function"==typeof console.log&&(q=function(){console.log.apply(console,arguments)});var D=0,A=1,F=2,W=3;o.prototype.then=function(n,r,e){var u=new o;return s(this,u,n,r,e),i(this)||p(this),new t(u)},o.prototype.thrown=function(n,t){return this.then(null,null,function(r){return t?(r instanceof n&&t(r),void 0):(t=n,t(r),void 0)})},o.prototype.error=function(n,t){return this.then(null,function(r){return t?(r instanceof n&&t(r),void 0):(t=n,t(r),void 0)})},o.prototype.fulfill=function(n){i(this)&&(a(this,A,n),p(this))},o.prototype.reject=function(n){i(this)&&(this._log&&q(n),p(this),a(this,D,w(n,!1)))},o.prototype.throwError=function(n){i(this)&&(this._log&&q(n),p(this),a(this,W,w(n,!0)))},o.prototype.promise=function(){return new t(this)},o.prototype.fulfilled=function(){return f(this)},o.prototype.rejected=function(){return c(this)||l(this)},o.prototype.pending=function(){return i(this)},r.Deferred=o}()},{"./error":3,__browserify_process:5}],3:[function(n,t,r){var e=n("__browserify_process");!function(){"use strict";function n(n,t){this.error=n,this.thrown=t,this.id=i++,this.postponed=!1}function t(){var n=a;s||(s=!0,e.nextTick(function(){n===a&&(s=!1,o())}))}function o(){var n,e;for(n in l)l.hasOwnProperty(n)&&(e=l[n],e.postponed?(e.postponed=!1,t()):(r.handle(e,!0),u(e)))}function u(n){var t;t=n.thrown?f.concat(c):f;for(var e=0,o=t.length;o>e;e++)t[e](r.unwrap(n))}var i=0,f=[],c=[];r.events={on:function(n,t){"error"===n?f.push(t):"thrown"===n&&c.push(t)},off:function(n,t){var r;"error"===n?r=f:"thrown"===n&&(r=c);for(var e=0,o=r.length;o>e;e++)if(r[e]===t)return r.splice(e,1),!0;return!1},once:function(n,t){var e=function(){t.apply(void 0,arguments),r.events.off(n,e)};r.events.on(n,e)}};var l={};r.wrap=function(r,e){var o=new n(r,e);return l[o.id]=o,t(),o},r.unwrap=function(n){return n.error},r.isWrapped=function(t){return t instanceof n},r.handle=function(n,t){(!n.thrown||t)&&l.hasOwnProperty(n.id)&&delete l[n.id]},r.postpone=function(n){n.postponed=!0},r.reset=function(){l={},f=[],c=[],s=!1,a++};var s=!1,a=0}()},{__browserify_process:5}],4:[function(n,t,r){!function(){"use strict";function t(n,t){function r(n){return function(t){l[n]=t,a.decrement()}}function e(n){return function(){l[n]=void 0,a.decrement()}}var o,i,f,l=Array(n.length),s=new p,a=u(n.length,c(s.fulfill,s),c(s.reject,s)),d=t?e:r,h=t?r:e;for(i=0,f=n.length;f>i;i++)o=n[i],o.then(d(i),h(i));return s.then(function(){return l})}function e(n,t,r){var e=[],u=[],c=function(n){e.push(n)},l=function(n){u.push(n)},s=t?i(c):f(c),a=r?i(l):f(l);return{fulfilled:e,rejected:u,promise:o(n,s,a)}}function o(n,t,r){var e,o,i,f=new p;if(0===n.length)return f.fulfill([]),f;for(i=u(n.length,c(f.fulfill,f),c(f.reject,f)),e=0;o=n[e];e++)o.then(t(i,o),r(i,o));return f}function u(n,t,r){var e=n,o=!1,u={decrement:function(){o||(e--,0===e&&t())},error:function(){o||(o=!0,r.apply(arguments))}};return 0===e&&t(),u}function i(n){return function(t,r){return function(){n&&n(r),t.decrement()}}}function f(n){return function(t,r){return function(){n&&n(r),t.error()}}}function c(n,t){return function(){n.apply(t,arguments)}}function l(n){return s(a(n))}function s(n){var t,r,e=[];for(t=0;r=n[t];t++)r instanceof Array?e=e.concat(s(r)):e.push(r);return e}function a(n,t,r){return Array.prototype.slice.call(n,t||0,r||n.length)}var p=n("./deferred").Deferred;r.make=function(n){var t=new p;try{n(c(t.fulfill,t),c(t.reject,t))}catch(r){t.throwError(r)}return t.promise()},r.fulfill=function(n){return r.make(function(t){t(n)})},r.fcall=function(n){return r.make(function(t){t(n())})},r.reject=function(n){return r.make(function(t,r){r(n)})},r.ferr=function(n){return r.make(function(t,r){r(n())})},r.all=function(){var n=e(l(arguments),!0,!1);return r.make(function(t,r){n.promise.then(function(){t(n.fulfilled)},function(){r(n.rejected[0])})})},r.none=function(){var n=e(l(arguments),!1,!0);return r.make(function(t,r){n.promise.then(function(){t(n.rejected)},function(){r(n.fulfilled[0])})})},r.resolved=r.allSettled=function(){var n=e(l(arguments),!0,!0);return r.make(function(t){n.promise.then(function(){t({fulfilled:n.fulfilled,rejected:n.rejected})})})},r.firstFulfilled=r.ff=function(){var n=r.none(l(arguments));return r.make(function(t,r){n.then(r,t)})},r.firstRejected=r.fr=function(){var n=r.all(l(arguments));return r.make(function(t,r){n.then(r,t)})},r.lastFulfilled=r.lf=function(){var n=r.resolved(l(arguments));return r.make(function(t,r){n.then(function(n){var e=n.fulfilled,o=n.rejected;0===e.length?r(o):t(e[e.length-1])})})},r.lastRejected=r.lr=function(){var n=r.resolved(l(arguments));return r.make(function(t,r){n.then(function(n){var e=n.fulfilled,o=n.rejected;0===o.length?r(e):t(o[o.length-1])})})},r.invert=function(n){return r.make(function(t,r){n.then(r,t)})},r.data=r.spread=function(){var n=a(arguments),r=l(n.slice(0,n.length-1)),e=t(r,!1),o=n[n.length-1];return e.then(function(n){o.apply(null,n)}),e},r.errors=function(){var n=a(arguments),r=l(n.slice(0,n.length-1)),e=t(r,!0),o=n[n.length-1];return e.then(function(n){o.apply(null,n)}),e},r.wait=function(n){return r.make(function(t){setTimeout(function(){t(n)},n)})},r.delay=function(n,t){return r.make(function(r,e){n.then(function(){var n=a(arguments,0);setTimeout(function(){r.apply(null,n)},t)},function(){var n=a(arguments,0);setTimeout(function(){e.apply(null,n)},t)})})},r.timeout=function(n,t){return r.make(function(r,e){setTimeout(function(){e("Error: "+t+"ms timeout exceeded.")},t),n.then(r,e)})},r.napply=function(n,t,e){var o=e.slice(0,e.length);return r.make(function(r,e){o.push(function(n,t){n?e(n):r(t)}),t.apply(n,o)})},r.nfapply=function(n,t){return r.napply(null,n,t)},r.ncall=r.wrapFor=function(n,t){var e=a(arguments,2);return r.napply(n,t,e)},r.nfcall=r.wrap=function(n){var t=a(arguments,1);return r.napply(null,n,t)},r.npost=function(n,t,e){return r.napply(n,n[t],e)},r.ninvoke=r.nsend=function(n,t){var e=a(arguments,2);return r.napply(n,n[t],e)},r.nbind=function(n,t){var e=a(arguments,2);return function(){var o=a(arguments);return r.napply(t,n,e.concat(o))}},r.nfbind=r.denodeify=function(n){var t=[n,null].concat(a(arguments,1));return r.nbind.apply(r,t)},r.nodeify=function(n,t){return n.then(function(n){t(null,n)},function(n){t(n)}),n}}()},{"./deferred":2}],5:[function(n,t){var r=t.exports={};r.nextTick=function(){var n="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(n)return function(n){return window.setImmediate(n)};if(t){var r=[];return window.addEventListener("message",function(n){var t=n.source;if((t===window||null===t)&&"process-tick"===n.data&&(n.stopPropagation(),r.length>0)){var e=r.shift();e()}},!0),function(n){r.push(n),window.postMessage("process-tick","*")}}return function(n){setTimeout(n,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.binding=function(){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw Error("process.chdir is not supported")}},{}]},{},[1])(1)});