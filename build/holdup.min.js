!function(n){"use strict";var e=n.holdup;n.holdup={noConflict:function(){return n.holdup=e,this},_timing:{},_error:{}}}(window),!function(){"use strict";function n(n){var e=setTimeout;"undefined"!=typeof setImmediate&&(e=setImmediate),"undefined"!=typeof process&&process.nextTick&&(e=process.nextTick),e(n,0)}var e;e="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?module.exports:window.holdup._timing,e.later=n}(),!function(){"use strict";function n(n,e){this.error=n,this.thrown=e,this.id=i++,this.postponed=!1}function e(){a||(a=!0,u(function(){a=!1,t()}))}function t(){var n,t;for(n in l)l.hasOwnProperty(n)&&(t=l[n],t.postponed?(t.postponed=!1,e()):(o.handle(t),r(t)))}function r(n){var e;e=n.thrown?f.concat(c):f,console.log(e,n);for(var t=0,r=e.length;r>t;t++)e[t](o.unwrap(n))}var o,u;"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?(o=module.exports,u=require("./later").later):(o=window.holdup._error,u=window.holdup._timing.later);var i=0,f=[],c=[];o.events={on:function(n,e){"error"===n?f.push(e):"thrown"===n&&c.push(e)},off:function(n,e){var t;"error"===n?t=f:"thrown"===n&&(t=c);for(var r=0,o=t.length;o>r;r++)if(t[r]===e)return t.splice(r,1),!0;return!1},once:function(n,e){var t=function(){e.apply(void 0,arguments),o.events.off(n,t)};o.events.on(n,t)}};var l={};o.wrap=function(t,r){var o=new n(t,r);return l[o.id]=o,e(),o},o.unwrap=function(n){return n.error},o.isWrapped=function(e){return e instanceof n},o.handle=function(n){l.hasOwnProperty(n.id)&&delete l[n.id]},o.postpone=function(n){n.postponed=!0},o.reset=function(){l={},f=[],c=[],a=!1};var a=!1}(),!function(){"use strict";function n(n){this.then=t(n.then,n),this.error=t(n.error,n),this.thrown=t(n.thrown,n),this._deferred=n}function e(){this._fulfilledBuffer=[],this._rejectedBuffer=[],this._thrownBuffer=[],this._state=D,this._value=null,this._scheduled=!1,this._log=!1}function t(n,e){return function(){return n.apply(e,arguments)}}function r(n){return n._state===D}function o(n){return n._state===A}function u(n){return n._state===P}function i(n){return n._state===F}function f(n,e,t,r,o){n._fulfilledBuffer.push(function(n){h(e,n,A,t)}),n._rejectedBuffer.push(function(n){h(e,n,P,r)}),n._thrownBuffer.push(function(n){h(e,n,F,r)}),n._thrownBuffer.push(function(n){h(e,n,F,o)})}function c(n,e,t){n._state=e,n._value=t}function l(n){n._scheduled||(n._scheduled=!0,q(function(){n._scheduled=!1,a(n)}))}function a(n){var e=s(n);B(e,n._value),p(n)}function s(n){return o(n)?n._fulfilledBuffer:i(n)?n._thrownBuffer:n._rejectedBuffer}function p(n){n._fulfilledBuffer=[],n._rejectedBuffer=[],n._thrownBuffer=[]}function d(n,e){return T.isWrapped(n)?(T.postpone(n),n):T.wrap(n,e)}function h(n,e,t,r){var o=v(n,t);"function"==typeof r?m(n,r,e):o.call(n,e)}function v(n,e){return e===A?n.fulfill:e===F?n.throwError:n.reject}function m(n,e,t){var r,o=T.isWrapped(t),u=o?T.unwrap(t):t;try{r=e(u),o&&T.handle(t)}catch(i){return n.throwError(i),void 0}y(n,r)}function y(t,r){var o=null;return w(t,r),"function"==typeof r||"object"==typeof r?(o=g(r,t),"function"==typeof o?(r instanceof n?_(r._deferred,o,t):r instanceof e&&_(r,o,t),j(r,o,t)):t.fulfill(r),void 0):(t.fulfill(r),void 0)}function w(e,t){return t===e?(e.throwError(new TypeError("Promise cannot return itself.")),!0):t instanceof n&&t._deferred===e?(e.throwError(new TypeError("Promise cannot return itself")),!0):!1}function g(n,e){var t=null;try{t=E(n)}catch(r){e.throwError(r)}return t}function _(n,e,t){var r=k(n,e,t);try{e.call(n,r.resolve,r.reject,r.throwError)}catch(o){r.throwError(o)}}function j(n,e,t){var r=k(n,e,t);try{e.call(n,r.resolve,r.reject)}catch(o){r.throwError(o)}}function k(n,e,t){var r,o,u,i=!1,f=function(n){i||(i=r=!0,y(t,n))},c=function(n){i||(i=o=!0,t.reject(n))},l=function(n){i||(i=u=!0,t.throwError(n))};return{resolve:f,reject:c,throwError:l}}function E(n){return n?n.then:null}function B(n,e){var t,r;for(t=0;r=n[t];t++)r(e)}var x,T,q;"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?(x=module.exports,T=require("./error"),q=require("./later").later):(x=window.holdup,T=x._error,q=x._timing.later);var b=function(){};"undefined"!=typeof console&&"function"==typeof console.log&&(b=function(){console.log.apply(console,arguments)});var P=0,A=1,D=2,F=3;e.prototype.then=function(t,o,u){var i=new e;return f(this,i,t,o,u),r(this)||l(this),new n(i)},e.prototype.thrown=function(n,e){return this.then(null,null,function(t){return e?(t instanceof n&&e(t),void 0):(e=n,e(t),void 0)})},e.prototype.error=function(n,e){return this.then(null,function(t){return e?(t instanceof n&&e(t),void 0):(e=n,e(t),void 0)})},e.prototype.fulfill=function(n){r(this)&&(c(this,A,n),l(this))},e.prototype.reject=function(n){r(this)&&(this._log&&b(n),l(this),c(this,P,d(n,!1)))},e.prototype.throwError=function(n){r(this)&&(this._log&&b(n),l(this),c(this,F,d(n,!0)))},e.prototype.promise=function(){return new n(this)},e.prototype.fulfilled=function(){return o(this)},e.prototype.rejected=function(){return u(this)},e.prototype.pending=function(){return r(this)},x.Deferred=e}(),!function(){"use strict";function n(n,e){function t(n){return function(e){l[n]=e,p.decrement()}}function o(n){return function(){l[n]=void 0,p.decrement()}}var u,f,c,l=Array(n.length),a=new s,p=r(n.length,i(a.fulfill,a),i(a.reject,a)),d=e?o:t,h=e?t:o;for(f=0,c=n.length;c>f;f++)u=n[f],u.then(d(f),h(f));return a.then(function(){return l})}function e(n,e,r){var i=[],f=[],c=function(n){i.push(n)},l=function(n){f.push(n)},a=e?o(c):u(c),s=r?o(l):u(l);return{fulfilled:i,rejected:f,promise:t(n,a,s)}}function t(n,e,t){var o,u,f,c=new s;if(0===n.length)return c.fulfill([]),c;for(f=r(n.length,i(c.fulfill,c),i(c.reject,c)),o=0;u=n[o];o++)u.then(e(f,u),t(f,u));return c}function r(n,e,t){var r=n,o=!1,u={decrement:function(){o||(r--,0===r&&e())},error:function(){o||(o=!0,t.apply(arguments))}};return 0===r&&e(),u}function o(n){return function(e,t){return function(){n&&n(t),e.decrement()}}}function u(n){return function(e,t){return function(){n&&n(t),e.error()}}}function i(n,e){return function(){n.apply(e,arguments)}}function f(n){return c(l(n))}function c(n){var e,t,r=[];for(e=0;t=n[e];e++)t instanceof Array?r=r.concat(c(t)):r.push(t);return r}function l(n,e,t){return Array.prototype.slice.call(n,e||0,t||n.length)}var a,s;"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?(a=module.exports,s=require("./deferred").Deferred):(a=window.holdup,s=a.Deferred),a.make=function(n){var e=new s;return n(i(e.fulfill,e),i(e.reject,e)),e.promise()},a.fulfill=function(n){return a.make(function(e){e(n)})},a.fcall=function(n){return a.make(function(e){e(n())})},a.reject=function(n){return a.make(function(e,t){t(n)})},a.ferr=function(n){return a.make(function(e,t){t(n())})},a.all=function(){var n=e(f(arguments),!0,!1);return a.make(function(e,t){n.promise.then(function(){e(n.fulfilled)},function(){t(n.rejected[0])})})},a.none=function(){var n=e(f(arguments),!1,!0);return a.make(function(e,t){n.promise.then(function(){e(n.rejected)},function(){t(n.fulfilled[0])})})},a.resolved=a.allSettled=function(){var n=e(f(arguments),!0,!0);return a.make(function(e){n.promise.then(function(){e({fulfilled:n.fulfilled,rejected:n.rejected})})})},a.firstFulfilled=a.ff=function(){var n=a.none(f(arguments));return a.make(function(e,t){n.then(t,e)})},a.firstRejected=a.fr=function(){var n=a.all(f(arguments));return a.make(function(e,t){n.then(t,e)})},a.lastFulfilled=a.lf=function(){var n=a.resolved(f(arguments));return a.make(function(e,t){n.then(function(n){var r=n.fulfilled,o=n.rejected;0===r.length?t(o):e(r[r.length-1])})})},a.lastRejected=a.lr=function(){var n=a.resolved(f(arguments));return a.make(function(e,t){n.then(function(n){var r=n.fulfilled,o=n.rejected;0===o.length?t(r):e(o[o.length-1])})})},a.invert=function(n){return a.make(function(e,t){n.then(t,e)})},a.data=a.spread=function(){var e=l(arguments),t=f(e.slice(0,e.length-1)),r=n(t,!1),o=e[e.length-1];return r.then(function(n){o.apply(null,n)}),r},a.errors=function(){var e=l(arguments),t=f(e.slice(0,e.length-1)),r=n(t,!0),o=e[e.length-1];return r.then(function(n){o.apply(null,n)}),r},a.wait=function(n){return a.make(function(e){setTimeout(function(){e(n)},n)})},a.delay=function(n,e){return a.make(function(t,r){n.then(function(){var n=l(arguments,0);setTimeout(function(){t.apply(null,n)},e)},function(){var n=l(arguments,0);setTimeout(function(){r.apply(null,n)},e)})})},a.timeout=function(n,e){return a.make(function(t,r){setTimeout(function(){r("Error: "+e+"ms timeout exceeded.")},e),n.then(t,r)})},a.napply=function(n,e,t){var r=t.slice(0,t.length);return a.make(function(t,o){r.push(function(n,e){n?o(n):t(e)}),e.apply(n,r)})},a.nfapply=function(n,e){return a.napply(null,n,e)},a.ncall=a.wrapFor=function(n,e){var t=l(arguments,2);return a.napply(n,e,t)},a.nfcall=a.wrap=function(n){var e=l(arguments,1);return a.napply(null,n,e)},a.npost=function(n,e,t){return a.napply(n,n[e],t)},a.ninvoke=a.nsend=function(n,e){var t=l(arguments,2);return a.napply(n,n[e],t)},a.nbind=function(n,e){var t=l(arguments,2);return function(){var r=l(arguments);return a.napply(e,n,t.concat(r))}},a.nfbind=a.denodeify=function(n){var e=[n,null].concat(l(arguments,1));return a.nbind.apply(a,e)},a.nodeify=function(n,e){return n.then(function(n){e(null,n)},function(n){e(n)}),n}}(),!function(){"use strict";var n=window.holdup;n.on=n._error.events.on,n.off=n._error.events.off,n.once=n._error.events.once,n.resetErrors=n._error.reset}();