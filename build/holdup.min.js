!function(n){"use strict";var e=n.holdup;n.holdup={noConflict:function(){return n.holdup=e,this}}}(window),!function(){"use strict";function n(){this._fulfilledBuffer=[],this._rejectedBuffer=[],this._log=!1,this._state=_,this._args=[],this._scheduled=!1}function e(n,e){return function(){return n.apply(e,arguments)}}function t(n){return n._state===_}function r(n){return n._state===v}function u(n){return n._state===y}function o(n,e,t,r){n._fulfilledBuffer.push(function(){l(n,e,v,t)}),n._rejectedBuffer.push(function(){l(n,e,y,r)})}function i(n,e,t){n._state=e?v:y,n._args=t,f(n)}function f(n){n._scheduled||(n._scheduled=!0,m(function(){n._scheduled=!1,c(n)}))}function c(n){d(r(n)?n._fulfilledBuffer:n._rejectedBuffer,null,n._args),n._fulfilledBuffer=[],n._rejectedBuffer=[]}function l(n,e,t,r){var u=n._args,o=t===v?e.fulfill:e.reject;"function"==typeof r?a(e,r,u):o.apply(e,n._args)}function a(n,e,t){var r;try{r=e.apply(null,t)}catch(u){return n.reject(u),n._log&&"undefined"!=typeof console&&console.log(u),void 0}s(n,r)}function s(n,e){var t=!1;try{t=p(e)}catch(r){return n.reject(r),n._log&&"undefined"!=typeof console&&console.log(r),void 0}t?e.then(function(){n.fulfill.apply(n,arguments)},function(){n.reject.apply(n,arguments)}):n.fulfill(e)}function p(n){return n&&"function"==typeof n.then}function d(n,e,t){var r,u;for(r=0;u=n[r];r++)u.apply(e,t)}function h(n){return Array.prototype.slice.call(n,0,n.length)}function m(n){var e=setTimeout;"undefined"!=typeof setImmediate&&(e=setImmediate),"undefined"!=typeof process&&process.nextTick&&(e=process.nextTick),e(n,0)}var g;g="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?module.exports:window.holdup;var y=-1,v=1,_=0;n.prototype.then=function(e,r){var u=new n;return o(this,u,e,r),t(this)||f(this),u.promise()},n.prototype.fulfill=function(){t(this)&&i(this,!0,h(arguments))},n.prototype.reject=function(){t(this)&&i(this,!1,h(arguments))},n.prototype.promise=function(){return{then:e(this.then,this)}},n.prototype.fulfilled=function(){return r(this)},n.prototype.rejected=function(){return u(this)},n.prototype.pending=function(){return t(this)},g.Deferred=n}(),!function(){"use strict";function n(n,e){function t(n){return function(e){l[n]=e,p.decrement()}}function u(n){return function(){l[n]=void 0,p.decrement()}}var o,f,c,l=Array(n.length),a=new s,p=r(n.length,i(a.fulfill,a),i(a.reject,a)),d=e?u:t,h=e?t:u;for(f=0,c=n.length;c>f;f++)o=n[f],o.then(d(f),h(f));return a.then(function(){return l})}function e(n,e,r){var i=[],f=[],c=function(n){i.push(n)},l=function(n){f.push(n)},a=e?u(c):o(c),s=r?u(l):o(l);return{fulfilled:i,rejected:f,promise:t(n,a,s)}}function t(n,e,t){var u,o,f,c=new s;if(0===n.length)return c.fulfill([]),c;for(f=r(n.length,i(c.fulfill,c),i(c.reject,c)),u=0;o=n[u];u++)o.then(e(f,o),t(f,o));return c}function r(n,e,t){var r=n,u=!1,o={decrement:function(){u||(r--,0===r&&e())},error:function(){u||(u=!0,t.apply(arguments))}};return 0===r&&e(),o}function u(n){return function(e,t){return function(){n&&n(t),e.decrement()}}}function o(n){return function(e,t){return function(){n&&n(t),e.error()}}}function i(n,e){return function(){n.apply(e,arguments)}}function f(n){return c(l(n))}function c(n){var e,t,r=[];for(e=0;t=n[e];e++)t instanceof Array?r=r.concat(c(t)):r.push(t);return r}function l(n,e,t){return Array.prototype.slice.call(n,e||0,t||n.length)}var a,s;"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?(a=module.exports,s=require("./deferred").Deferred):(a=window.holdup,s=a.Deferred),a.make=function(n){var e=new s;return n(i(e.fulfill,e),i(e.reject,e)),e.promise()},a.all=function(){var n=e(f(arguments),!0,!1);return a.make(function(e,t){n.promise.then(function(){e(n.fulfilled)},function(){t(n.rejected[0])})})},a.none=function(){var n=e(f(arguments),!1,!0);return a.make(function(e,t){n.promise.then(function(){e(n.rejected)},function(){t(n.fulfilled[0])})})},a.resolved=a.allSettled=function(){var n=e(f(arguments),!0,!0);return a.make(function(e){n.promise.then(function(){e(n.fulfilled,n.rejected)})})},a.firstFulfilled=a.ff=function(){var n=a.none(f(arguments));return a.make(function(e,t){n.then(t,e)})},a.firstRejected=a.fr=function(){var n=a.all(f(arguments));return a.make(function(e,t){n.then(t,e)})},a.lastFulfilled=a.lf=function(){var n=a.resolved(f(arguments));return a.make(function(e,t){n.then(function(n,r){0===n.length?t(r):e(n[n.length-1])})})},a.lastRejected=a.lr=function(){var n=a.resolved(f(arguments));return a.make(function(e,t){n.then(function(n,r){0===r.length?t(n):e(r[r.length-1])})})},a.invert=function(n){return a.make(function(e,t){n.then(t,e)})},a.data=a.spread=function(){var e=l(arguments),t=f(e.slice(0,e.length-1)),r=n(t,!1),u=e[e.length-1];return r.then(function(n){u.apply(null,n)}),r},a.errors=function(){var e=l(arguments),t=f(e.slice(0,e.length-1)),r=n(t,!0),u=e[e.length-1];return r.then(function(n){u.apply(null,n)}),r},a.wait=function(n){return a.make(function(e){setTimeout(function(){e(n)},n)})},a.delay=function(n,e){return a.make(function(t,r){n.then(function(){var n=l(arguments,0);setTimeout(function(){t.apply(null,n)},e)},function(){var n=l(arguments,0);setTimeout(function(){r.apply(null,n)},e)})})},a.timeout=function(n,e){return a.make(function(t,r){setTimeout(function(){r("Error: "+e+"ms timeout exceeded.")},e),n.then(t,r)})},a.napply=function(n,e,t){var r=t.slice(0,t.length);return a.make(function(t,u){r.push(function(n,e){n?u(n):t(e)}),e.apply(n,r)})},a.nfapply=function(n,e){return a.napply(null,n,e)},a.ncall=a.wrapFor=function(n,e){var t=l(arguments,2);return a.napply(n,e,t)},a.nfcall=a.wrap=function(n){var e=l(arguments,1);return a.napply(null,n,e)},a.npost=function(n,e,t){return a.napply(n,n[e],t)},a.ninvoke=a.nsend=function(n,e){var t=l(arguments,2);return a.napply(n,n[e],t)},a.nbind=function(n,e){var t=l(arguments,2);return function(){var r=l(arguments);return a.napply(e,n,t.concat(r))}},a.nfbind=a.denodeify=function(n){var e=[n,null].concat(l(arguments,1));return a.nbind.apply(a,e)},a.nodeify=function(n,e){return n.then(function(n){e(null,n)},function(n){e(n)}),n}}();