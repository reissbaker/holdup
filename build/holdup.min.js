!function(n){"use strict";var t=n.holdup;n.holdup={noConflict:function(){return n.holdup=t,this},_timing:{},_error:{}}}(window),!function(){"use strict";function n(n){var t=setTimeout;"undefined"!=typeof setImmediate&&(t=setImmediate),"undefined"!=typeof process&&process.nextTick&&(t=process.nextTick),t(n,0)}var t;t="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?module.exports:window.holdup._timing,t.later=n}(),!function(){"use strict";function n(n,t){this.error=n,this.thrown=t,this.id=i++,this.postponed=!1}function t(){var n=s;a||(a=!0,u(function(){n===s&&(a=!1,e())}))}function e(){var n,e;for(n in l)l.hasOwnProperty(n)&&(e=l[n],e.postponed?(e.postponed=!1,t()):(o.handle(e,!0),r(e)))}function r(n){var t;t=n.thrown?f.concat(c):f;for(var e=0,r=t.length;r>e;e++)t[e](o.unwrap(n))}var o,u;"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?(o=module.exports,u=require("./later").later):(o=window.holdup._error,u=window.holdup._timing.later);var i=0,f=[],c=[];o.events={on:function(n,t){"error"===n?f.push(t):"thrown"===n&&c.push(t)},off:function(n,t){var e;"error"===n?e=f:"thrown"===n&&(e=c);for(var r=0,o=e.length;o>r;r++)if(e[r]===t)return e.splice(r,1),!0;return!1},once:function(n,t){var e=function(){t.apply(void 0,arguments),o.events.off(n,e)};o.events.on(n,e)}};var l={};o.wrap=function(e,r){var o=new n(e,r);return l[o.id]=o,t(),o},o.unwrap=function(n){return n.error},o.isWrapped=function(t){return t instanceof n},o.handle=function(n,t){(!n.thrown||t)&&l.hasOwnProperty(n.id)&&delete l[n.id]},o.postpone=function(n){n.postponed=!0},o.reset=function(){l={},f=[],c=[],a=!1,s++};var a=!1,s=0}(),!function(){"use strict";function n(n){this.then=e(n.then,n),this.error=e(n.error,n),this.thrown=e(n.thrown,n),this._deferred=n}function t(){this._fulfilledBuffer=[],this._rejectedBuffer=[],this._thrownBuffer=[],this._state=D,this._value=null,this._scheduled=!1,this._log=!1}function e(n,t){return function(){return n.apply(t,arguments)}}function r(n){return n._state===D}function o(n){return n._state===A}function u(n){return n._state===P}function i(n){return n._state===F}function f(n,t,e,r,o){n._fulfilledBuffer.push(function(n){h(t,n,A,e,!1)}),n._rejectedBuffer.push(function(n){h(t,n,P,r,!1)}),n._thrownBuffer.push(function(n){h(t,n,F,r,!1)}),n._thrownBuffer.push(function(n){h(t,n,F,o,!0)})}function c(n,t,e){n._state=t,n._value=e}function l(n){n._scheduled||(n._scheduled=!0,q(function(){n._scheduled=!1,a(n)}))}function a(n){var t=s(n);B(t,n._value),p(n)}function s(n){return o(n)?n._fulfilledBuffer:i(n)?n._thrownBuffer:n._rejectedBuffer}function p(n){n._fulfilledBuffer=[],n._rejectedBuffer=[],n._thrownBuffer=[]}function d(n,t){return T.isWrapped(n)?(T.postpone(n),n):T.wrap(n,t)}function h(n,t,e,r,o){var u=v(n,e);"function"==typeof r?m(n,r,t,o):u.call(n,t)}function v(n,t){return t===A?n.fulfill:t===F?n.throwError:n.reject}function m(n,t,e,r){var o,u=T.isWrapped(e),i=u?T.unwrap(e):e;try{o=t(i),u&&T.handle(e,r)}catch(f){return n.throwError(f),void 0}y(n,o)}function y(e,r){var o=null;return w(e,r),"function"==typeof r||"object"==typeof r?(o=g(r,e),"function"==typeof o?(r instanceof n?_(r._deferred,o,e):r instanceof t&&_(r,o,e),j(r,o,e)):e.fulfill(r),void 0):(e.fulfill(r),void 0)}function w(t,e){return e===t?(t.throwError(new TypeError("Promise cannot return itself.")),!0):e instanceof n&&e._deferred===t?(t.throwError(new TypeError("Promise cannot return itself")),!0):!1}function g(n,t){var e=null;try{e=E(n)}catch(r){t.throwError(r)}return e}function _(n,t,e){var r=k(n,t,e);try{t.call(n,r.resolve,r.reject,r.throwError)}catch(o){r.throwError(o)}}function j(n,t,e){var r=k(n,t,e);try{t.call(n,r.resolve,r.reject)}catch(o){r.throwError(o)}}function k(n,t,e){var r,o,u,i=!1,f=function(n){i||(i=r=!0,y(e,n))},c=function(n){i||(i=o=!0,e.reject(n))},l=function(n){i||(i=u=!0,e.throwError(n))};return{resolve:f,reject:c,throwError:l}}function E(n){return n?n.then:null}function B(n,t){var e,r;for(e=0;r=n[e];e++)r(t)}var x,T,q;"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?(x=module.exports,T=require("./error"),q=require("./later").later):(x=window.holdup,T=x._error,q=x._timing.later);var b=function(){};"undefined"!=typeof console&&"function"==typeof console.log&&(b=function(){console.log.apply(console,arguments)});var P=0,A=1,D=2,F=3;t.prototype.then=function(e,o,u){var i=new t;return f(this,i,e,o,u),r(this)||l(this),new n(i)},t.prototype.thrown=function(n,t){return this.then(null,null,function(e){return t?(e instanceof n&&t(e),void 0):(t=n,t(e),void 0)})},t.prototype.error=function(n,t){return this.then(null,function(e){return t?(e instanceof n&&t(e),void 0):(t=n,t(e),void 0)})},t.prototype.fulfill=function(n){r(this)&&(c(this,A,n),l(this))},t.prototype.reject=function(n){r(this)&&(this._log&&b(n),l(this),c(this,P,d(n,!1)))},t.prototype.throwError=function(n){r(this)&&(this._log&&b(n),l(this),c(this,F,d(n,!0)))},t.prototype.promise=function(){return new n(this)},t.prototype.fulfilled=function(){return o(this)},t.prototype.rejected=function(){return u(this)||i(this)},t.prototype.pending=function(){return r(this)},x.Deferred=t}(),!function(){"use strict";function n(n,t){function e(n){return function(t){l[n]=t,p.decrement()}}function o(n){return function(){l[n]=void 0,p.decrement()}}var u,f,c,l=Array(n.length),a=new s,p=r(n.length,i(a.fulfill,a),i(a.reject,a)),d=t?o:e,h=t?e:o;for(f=0,c=n.length;c>f;f++)u=n[f],u.then(d(f),h(f));return a.then(function(){return l})}function t(n,t,r){var i=[],f=[],c=function(n){i.push(n)},l=function(n){f.push(n)},a=t?o(c):u(c),s=r?o(l):u(l);return{fulfilled:i,rejected:f,promise:e(n,a,s)}}function e(n,t,e){var o,u,f,c=new s;if(0===n.length)return c.fulfill([]),c;for(f=r(n.length,i(c.fulfill,c),i(c.reject,c)),o=0;u=n[o];o++)u.then(t(f,u),e(f,u));return c}function r(n,t,e){var r=n,o=!1,u={decrement:function(){o||(r--,0===r&&t())},error:function(){o||(o=!0,e.apply(arguments))}};return 0===r&&t(),u}function o(n){return function(t,e){return function(){n&&n(e),t.decrement()}}}function u(n){return function(t,e){return function(){n&&n(e),t.error()}}}function i(n,t){return function(){n.apply(t,arguments)}}function f(n){return c(l(n))}function c(n){var t,e,r=[];for(t=0;e=n[t];t++)e instanceof Array?r=r.concat(c(e)):r.push(e);return r}function l(n,t,e){return Array.prototype.slice.call(n,t||0,e||n.length)}var a,s;"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?(a=module.exports,s=require("./deferred").Deferred):(a=window.holdup,s=a.Deferred),a.make=function(n){var t=new s;try{n(i(t.fulfill,t),i(t.reject,t))}catch(e){t.throwError(e)}return t.promise()},a.fulfill=function(n){return a.make(function(t){t(n)})},a.fcall=function(n){return a.make(function(t){t(n())})},a.reject=function(n){return a.make(function(t,e){e(n)})},a.ferr=function(n){return a.make(function(t,e){e(n())})},a.all=function(){var n=t(f(arguments),!0,!1);return a.make(function(t,e){n.promise.then(function(){t(n.fulfilled)},function(){e(n.rejected[0])})})},a.none=function(){var n=t(f(arguments),!1,!0);return a.make(function(t,e){n.promise.then(function(){t(n.rejected)},function(){e(n.fulfilled[0])})})},a.resolved=a.allSettled=function(){var n=t(f(arguments),!0,!0);return a.make(function(t){n.promise.then(function(){t({fulfilled:n.fulfilled,rejected:n.rejected})})})},a.firstFulfilled=a.ff=function(){var n=a.none(f(arguments));return a.make(function(t,e){n.then(e,t)})},a.firstRejected=a.fr=function(){var n=a.all(f(arguments));return a.make(function(t,e){n.then(e,t)})},a.lastFulfilled=a.lf=function(){var n=a.resolved(f(arguments));return a.make(function(t,e){n.then(function(n){var r=n.fulfilled,o=n.rejected;0===r.length?e(o):t(r[r.length-1])})})},a.lastRejected=a.lr=function(){var n=a.resolved(f(arguments));return a.make(function(t,e){n.then(function(n){var r=n.fulfilled,o=n.rejected;0===o.length?e(r):t(o[o.length-1])})})},a.invert=function(n){return a.make(function(t,e){n.then(e,t)})},a.data=a.spread=function(){var t=l(arguments),e=f(t.slice(0,t.length-1)),r=n(e,!1),o=t[t.length-1];return r.then(function(n){o.apply(null,n)}),r},a.errors=function(){var t=l(arguments),e=f(t.slice(0,t.length-1)),r=n(e,!0),o=t[t.length-1];return r.then(function(n){o.apply(null,n)}),r},a.wait=function(n){return a.make(function(t){setTimeout(function(){t(n)},n)})},a.delay=function(n,t){return a.make(function(e,r){n.then(function(){var n=l(arguments,0);setTimeout(function(){e.apply(null,n)},t)},function(){var n=l(arguments,0);setTimeout(function(){r.apply(null,n)},t)})})},a.timeout=function(n,t){return a.make(function(e,r){setTimeout(function(){r("Error: "+t+"ms timeout exceeded.")},t),n.then(e,r)})},a.napply=function(n,t,e){var r=e.slice(0,e.length);return a.make(function(e,o){r.push(function(n,t){n?o(n):e(t)}),t.apply(n,r)})},a.nfapply=function(n,t){return a.napply(null,n,t)},a.ncall=a.wrapFor=function(n,t){var e=l(arguments,2);return a.napply(n,t,e)},a.nfcall=a.wrap=function(n){var t=l(arguments,1);return a.napply(null,n,t)},a.npost=function(n,t,e){return a.napply(n,n[t],e)},a.ninvoke=a.nsend=function(n,t){var e=l(arguments,2);return a.napply(n,n[t],e)},a.nbind=function(n,t){var e=l(arguments,2);return function(){var r=l(arguments);return a.napply(t,n,e.concat(r))}},a.nfbind=a.denodeify=function(n){var t=[n,null].concat(l(arguments,1));return a.nbind.apply(a,t)},a.nodeify=function(n,t){return n.then(function(n){t(null,n)},function(n){t(n)}),n}}(),!function(){"use strict";var n=window.holdup;n.on=n._error.events.on,n.off=n._error.events.off,n.once=n._error.events.once,n.resetErrors=n._error.reset}();